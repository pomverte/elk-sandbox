= elk-sandbox


.Access
[align="center",frame="topbot"]
|===
| Service       | Credentials      | URL

| Elasticsearch | elastic/changeme | http://192.168.99.100:9200
| Kibana        | kibana/changeme  | http://192.168.99.100:5601/status
|===

== Installation

. https://www.elastic.co/guide/en/elastic-stack/current/installing-elastic-stack.html
. https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html
. https://www.elastic.co/guide/en/kibana/5.5/docker.html
. https://www.elastic.co/guide/en/logstash/current/docker.html
. https://www.elastic.co/guide/en/beats/filebeat/5.5/filebeat-installation.html#docker

 $ curl -H 'Authorization: Basic ZWxhc3RpYzpjaGFuZ2VtZQ==' 'http://192.168.99.100:9200/_cat/indices?v'

=== Production mode

IMPORTANT: `sysctl -w vm.max_map_count=262144`
https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html#docker-cli-run-prod-mode

IMPORTANT: X-Pack security : change password !
https://www.elastic.co/guide/en/x-pack/current/security-getting-started.html#security-getting-started

== Output

.Filebeat
[source,json]
----
{
	"@timestamp": "2017-09-10T20:52:38.992Z",
	"beat": {
		"hostname": "084b03e69c9a",
		"name": "084b03e69c9a",
		"version": "5.5.2"
	},
	"input_type": "log",
	"log": "2017-09-09 18:57:39.225  INFO 1 --- [           main] com.example.logthis.LogThisApplication   : Starting LogThisApplication v0.0.1-SNAPSHOT on 1a3de447a329 with PID 1 (/log-this.jar started by root in /)",
	"offset": 1212,
	"source": "/a8fdb8d456918552b85ce1d24a8fb3cc11fe5df8bd4b115-json.log",
	"stream": "stdout",
	"tags": ["json", "docker"],
	"time": "2017-09-09T18:57:39.23817313Z",
	"type": "log"
}
----

== References

. https://logz.io/blog/docker-logging/
. https://logz.io/blog/shipping-logs-filebeat/
. https://logz.io/blog/5-logstash-filter-plugins/
